{# 
  H√âROS - SECTION PRINCIPALE
  =========================
  
  SYST√àME INTELLIGENT :
  ‚Ä¢ Donn√©es Tally (identity.json) + Placeholders m√©tier (trades.json)
  ‚Ä¢ Fallback automatique si donn√©es manquantes
  ‚Ä¢ Couleurs et textes adapt√©s au m√©tier
  ‚Ä¢ Logo intelligent : image si fournie, sinon nom d'entreprise
#}

{# D√©terminer le m√©tier : identity.TRADE ou site.trade #}
{% set currentTrade = identity.TRADE or site.trade or "depanneur" %}
{% set tradeData = trades[currentTrade] %}

{# Syst√®me de fallback pour chaque donn√©e #}
{% set heroText = identity.HERO_TEXT or tradeData.HERO_TITLE.replace("{{CITY}}", identity.CITY or "Votre ville") %}
{% set heroSubtitle = identity.HERO_SUBTITLE or "Intervention rapide, devis clair" %}
{% set aboutSnippet = identity.ABOUT_SNIPPET or tradeData.ABOUT_SNIPPET %}
{% set urgencyText = identity.URGENCY_TEXT or tradeData.URGENCY_TEXT %}
{% set accentColor = identity.ACCENT_COLOR or tradeData.ACCENT %}

{# Appliquer la couleur d'accent du m√©tier #}
<style>
:root {
  --accent-color: {{ accentColor }};
  --hero-accent: {{ accentColor }};
}
</style>

{% if identity.ENABLE_EMERGENCY_BANNER %}
<div class="emergency-banner" style="background: {{ accentColor }}; border-bottom: 3px solid {{ accentColor }}cc;">
  <div class="marquee" aria-hidden="true">
    <div class="marquee__inner">
      <span class="emergency-text">{{ urgencyText }}</span>
      <span class="response-time">Intervention en {{ identity.RESPONSE_TIME }}</span>
      <!-- Duplicated content for mobile scrolling -->
      <span class="emergency-text mobile-only">{{ urgencyText }}</span>
      <span class="response-time mobile-only">Intervention en {{ identity.RESPONSE_TIME }}</span>
      <span class="emergency-text mobile-only">{{ urgencyText }}</span>
      <span class="response-time mobile-only">Intervention en {{ identity.RESPONSE_TIME }}</span>
    </div>
  </div>
</div>
{% endif %}

<header class="hero{% if identity.HERO_BACKGROUND_IMAGE %} has-bg-image{% endif %}" 
        style="{% if identity.HERO_BACKGROUND_IMAGE %}--hero-bg-image: url('{{ identity.HERO_BACKGROUND_IMAGE }}');{% endif %} --accent-color: {{ accentColor }};">
  <div class="container">
    <div class="hero-logo">
      {% set hasRealLogo = identity.LOGO_URL and not identity.LOGO_URL.includes('/assets/images/logo.png') %}
      {% if hasRealLogo %}
      <img src="{{ identity.LOGO_URL }}" alt="{{ identity.BUSINESS_NAME }}" class="logo">
      {% else %}
      <h2 class="business-name">{{ identity.BUSINESS_NAME }}</h2>
      {% endif %}
    </div>
    
    <h1>{{ heroText }}</h1>
    <p class="hero-subtitle">{{ heroSubtitle }}</p>
    <p class="hero-description">{{ aboutSnippet }}</p>
    
    <div class="cta-row">
      {% set tel = identity.PHONE_TEL or identity.CTA_PRIMARY_TEL %}
      {% if tel %}
      <a class="cta-primary pulse" href="tel:{{ tel }}" style="background: {{ accentColor }}; box-shadow: 0 4px 15px {{ accentColor }}40;">
        <span class="cta-icon">üìû</span>
        <span class="cta-text">
          <span class="cta-label">{{ identity.CTA_PRIMARY_TEXT }}</span>
          <span class="cta-phone">{{ identity.PHONE_PRETTY or tel }}</span>
        </span>
      </a>
      {% endif %}
      <a class="cta-secondary" href="mailto:{{ identity.EMAIL }}" style="border-color: {{ accentColor }}; color: {{ accentColor }};">
        ‚úâÔ∏è {{ identity.CTA_SECONDARY_TEXT }}
      </a>
    </div>
    
    {% if identity.TRUST_BADGES %}
    <div class="trust-badges">
      {% for badge in identity.TRUST_BADGES %}
      <span class="trust-badge" style="border-left-color: {{ accentColor }};">‚úì {{ badge }}</span>
      {% endfor %}
    </div>
    {% endif %}
    
    {% if identity.IS_24_7 %}
    <p class="availability" style="color: {{ accentColor }};">üïê Disponible 24/7 - {{ identity.RESPONSE_TIME }}</p>
    {% endif %}
    
  </div>
</header>

