{# 
  SECTION GALERIE PHOTOS
  ======================
  Carousel horizontal d'images Unsplash
  Style : Comme le carousel services
#}

{% macro Gallery(identity, defaults) %}
  {% set galleryList = defaults.gallery %}
  {% set accentColor = identity.ACCENT_COLOR or defaults.ACCENT %}
  {% set trade = defaults.trade or identity.TRADE %}
  
  {% if galleryList and galleryList.length > 0 %}
    <section id="galerie" class="section section--gallery">
      <div class="container">
        <header class="section__header">
          <h2 class="section__title">Nos réalisations</h2>
          <p class="section__subtitle">Découvrez nos interventions récentes</p>
        </header>

        <div class="gallery-carousel">
          <div class="gallery-track">
            {# Première série #}
            {% for item in galleryList %}
              <article class="gallery-item">
                <div class="gallery-image">
                  <img src="{{ item.url }}" 
                       alt="{{ item.title }}" 
                       loading="lazy"
                       onerror="this.src='https://placehold.co/600x400/e0e0e0/666666?text={{ item.category | urlencode }}'">
                  <div class="gallery-overlay">
                    <span class="gallery-category" style="background: {{ accentColor }};">{{ item.category }}</span>
                  </div>
                </div>
                <div class="gallery-content">
                  <h3 class="gallery-title">{{ item.title }}</h3>
                  <p class="gallery-caption">{{ item.caption }}</p>
                </div>
              </article>
            {% endfor %}
            {# Duplication pour effet infini #}
            {% for item in galleryList %}
              <article class="gallery-item">
                <div class="gallery-image">
                  <img src="{{ item.url }}" 
                       alt="{{ item.title }}" 
                       loading="lazy"
                       onerror="this.src='https://placehold.co/600x400/e0e0e0/666666?text={{ item.category | urlencode }}'">
                  <div class="gallery-overlay">
                    <span class="gallery-category" style="background: {{ accentColor }};">{{ item.category }}</span>
                  </div>
                </div>
                <div class="gallery-content">
                  <h3 class="gallery-title">{{ item.title }}</h3>
                  <p class="gallery-caption">{{ item.caption }}</p>
                </div>
              </article>
            {% endfor %}
          </div>
        </div>
      </div>
    </section>
  {% endif %}
{% endmacro %}
